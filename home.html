<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <title>NIW Application Assistant ‚Äì Consulting, Form Filling, Petition Letter</title>
    <link rel="stylesheet" href="/styles.css" />
    <link href="https://fonts.googleapis.com/css2?family=Playfair+Display:wght@400;500;600;700&family=Crimson+Text:ital,wght@0,400;0,600;1,400&family=Inter:wght@300;400;500;600;700&display=swap" rel="stylesheet">
    <link href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.0.0/css/all.min.css" rel="stylesheet">
</head>
<body class="home">
    <nav class="site-nav">
        <div class="site-nav-inner">
            <div class="nav-left"></div>
            <a class="site-brand" href="/">
                <img src="/TurboNIW-name-italic.png" alt="TurboNIW" class="brand-logo-text">
            </a>
            <div class="nav-right">
                <a class="nav-link" href="/account">Account</a>
                <a class="btn btn-outline" href="/evaluation">Free Evaluation</a>
                <button id="logoutBtn" class="btn btn-secondary" type="button" style="display:none;">Logout</button>
            </div>
        </div>
    </nav>
    
    <header class="header home-hero">
        <div class="questions-hero">
            <div class="questions-container">
                <div class="questions-intro">
                    <h1 class="questions-title">Struggling with NIW application?</h1>
                    <p class="questions-subtitle">You're not alone. Here's what we hear most often:</p>
                </div>
                <div class="questions-grid">
                    <div class="question-card" data-delay="0">
                        <div class="question-number">01</div>
                        <div class="question-content">
                            <h3>Endless Procrastination</h3>
                            <p>Are you planning to apply for NIW but keep postponing?</p>
                        </div>
                    </div>
                    <div class="question-card" data-delay="200">
                        <div class="question-number">02</div>
                        <div class="question-content">
                            <h3>Form Confusion</h3>
                            <p>Unsure which forms to file or which fields to complete?</p>
                        </div>
                    </div>
                    <div class="question-card" data-delay="400">
                        <div class="question-number">03</div>
                        <div class="question-content">
                            <h3>Petition Letter Challenge</h3>
                            <p>Need a clear petition letter draft that demonstrates national importance?</p>
                        </div>
                    </div>
                </div>
                <div class="questions-cta">
                    <p class="cta-text cta-text-spaced">We've Been There. Now, We're Here for You.</p>
                </div>
            </div>
        </div>
    </header>

    <div class="container">
        <section class="home-section home-about">
            <div class="about-container">
                <div class="about-intro">
                    <h2>Who We Are</h2>
                    <p class="about-subtitle">A team of Ph.D. graduates and consultants from top firms who have experienced and understand the NIW process inside and out.</p>
                </div>
                
                <div class="about-grid">
                    <div class="about-card">
                        <h3>üéì Expert Team</h3>
                        <p>Computer Science and engineering Ph.D. holderswith deep understanding of technical documentation and research impact assessment.</p>
                    </div>
                    
                    <div class="about-card">
                        <h3>‚öôÔ∏è Structured Process</h3>
                        <p>We've developed a systematic approach that breaks down the complex NIW application into manageable, clear steps.</p>
                    </div>
                    
                    <div class="about-card">
                        <h3>‚è∞ Time-Saving Focus</h3>
                        <p>We help you prepare complete, professional materials efficiently so you can focus on your research and career.</p>
                    </div>
                </div>
                
                <div class="about-disclaimer">
                    <p><i class="fas fa-info-circle"></i> <strong>Important:</strong> We provide document preparation and guidance services. We are not a law firm and do not provide legal advice or guarantees of approval.</p>
                </div>
            </div>
        </section>

        <section class="home-section home-services" id="services">
            <div class="services-container">
                <div class="services-intro">
                    <h2>What We Offer</h2>
                    <p class="services-subtitle">Simple, transparent options. Choose the right fit for your unique situation and timeline.</p>
                </div>
                
                <div class="services-grid">
                    <div class="service-card">
                        <div class="service-badge">Basic</div>
                        <h3>Form Filling</h3>
                        <div class="service-price">
                            <span class="price-amount">$299</span>
                            <span class="price-period">one-time</span>
                        </div>
                        <div class="service-features">
                            <div class="feature-item">
                                <span class="feature-icon">‚úì</span>
                                <span>Complete NIW forms ready for submission</span>
                            </div>
                            <div class="feature-item">
                                <span class="feature-icon">‚úì</span>
                                <span>All required fields professionally filled</span>
                            </div>
                            <div class="feature-item">
                                <span class="feature-icon">‚úì</span>
                                <span> Formatted documents ready to file</span>
                            </div>
                        </div>
                        <a class="btn btn-outline" href="javascript:void(0)" onclick="setPackageAndRedirect('form-filling')">Start with Form Filling</a>
                    </div>
                    
                    <div class="service-card featured">
                        <div class="service-badge featured">Most Popular</div>
                        <h3>Petition Letter Draft</h3>
                        <div class="service-price">
                            <span class="price-amount">$1,599</span>
                            <span class="price-period">one-time</span>
                        </div>
                        <div class="service-features">
                            <div class="feature-item">
                                <span class="feature-icon">‚úì</span>
                                <span>Ready-to-file NIW application forms</span>
                            </div>
                            <div class="feature-item">
                                <span class="feature-icon">‚úì</span>
                                <span>Persuasive petition letter draft tailored to your case</span>
                            </div>
                            <div class="feature-item">
                                <span class="feature-icon">‚úì</span>
                                <span>Strategic evidence presentation for maximum impact</span>
                            </div>
                        </div>
                        <a class="btn btn-primary" href="javascript:void(0)" onclick="setPackageAndRedirect('full')">Get Started</a>
                    </div>
                </div>
                
                <div class="services-guarantee">
                    <p><i class="fas fa-shield-alt"></i> <strong>Quality Promise:</strong> Professional-grade materials prepared by Ph.D. experts specializing in Engineering and Computer Science NIW applications. We focus exclusively on these disciplines to deliver the highest quality results.</p>
                </div>
            </div>
        </section>

        

        <footer class="home-footer">
            <small>¬© 2025 TurboNIW </small>
        </footer>
    </div>

    <script>
        // Check login status and show/hide logout button
        async function checkLoginStatus() {
            try {
                const response = await fetch('/api/me');
                const data = await response.json();
                
                if (data.success && data.user) {
                    document.getElementById('logoutBtn').style.display = 'inline-block';
                    
                    // If user has already paid, disable package selection buttons
                    if (data.user.paid) {
                        const packageButtons = document.querySelectorAll('a[onclick*="setPackageAndRedirect"]');
                        packageButtons.forEach(button => {
                            button.style.opacity = '0.5';
                            button.style.pointerEvents = 'none';
                            button.style.cursor = 'not-allowed';
                            button.title = 'You have already selected a package. Go to your account page to manage it.';
                        });
                    }
                } else {
                    document.getElementById('logoutBtn').style.display = 'none';
                }
            } catch (error) {
                console.error('Error checking login status:', error);
                document.getElementById('logoutBtn').style.display = 'none';
            }
        }

        // Package selection functionality
        window.setPackageAndRedirect = async function(packageType) {
            try {
                // Check if user is logged in first
                const meResponse = await fetch('/api/me');
                const meData = await meResponse.json();
                
                if (!meData.success || !meData.user) {
                    // User not logged in, store package type in localStorage and redirect to account
                    localStorage.setItem('selectedPackage', packageType);
                    window.location.href = '/account';
                    return;
                }
                
                // Check if user has already paid
                if (meData.user.paid) {
                    // User has already paid, show alert and redirect to account
                    alert('You have already selected and paid for a package. Please go to your account page to manage your package.');
                    window.location.href = '/account';
                    return;
                }
                
                // User is logged in but not paid, set package type on server
                const response = await fetch('/api/set-package', {
                    method: 'POST',
                    headers: {
                        'Content-Type': 'application/json',
                    },
                    body: JSON.stringify({ packageType: packageType })
                });
                
                const result = await response.json();
                if (result.success) {
                    // Redirect to account page
                    window.location.href = '/account';
                } else {
                    console.error('Failed to set package type:', result.error);
                    // Still redirect to account page
                    window.location.href = '/account';
                }
            } catch (error) {
                console.error('Error setting package type:', error);
                // Store package type in localStorage and redirect to account
                localStorage.setItem('selectedPackage', packageType);
                window.location.href = '/account';
            }
        }


        // Check login status on page load
        document.addEventListener('DOMContentLoaded', function() {
            checkLoginStatus();
            
            // Logout functionality
            const logoutBtn = document.getElementById('logoutBtn');
            if (logoutBtn) {
                logoutBtn.addEventListener('click', async function() {
                    try {
                        const response = await fetch('/api/logout', { method: 'POST' });
                        const data = await response.json();
                        
                        if (data.success) {
                            document.getElementById('logoutBtn').style.display = 'none';
                            window.location.reload();
                        }
                    } catch (error) {
                        console.error('Error logging out:', error);
                    }
                });
            }
        });
    </script>
</body>
</html>


